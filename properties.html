<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Properties</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">
    
    <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-77665803-1', 'auto');
	  ga('send', 'pageview');

	</script>
  
	<script src="js/jquery-1.11.1.min.js"></script>
  
	<script src="js/shCore.js"></script>

	<script src="js/shBrushScala.js"></script>
	<script src="js/shBrushCSharp.js"></script>
	<script src="js/shBrushDart.js"></script>
	<script src="js/shBrushJava.js"></script>
	<script src="js/shBrushLense.js"></script>

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    
    <link href="css/base.css" rel="stylesheet">
	<link href="css/asciidoctor.css" rel="stylesheet">
 
  	<link rel="stylesheet" type="text/css" href="css/shCore.css"  >
	<link rel="stylesheet" type="text/css" href="css/shThemeLense.css" >
	<link rel="stylesheet" type="text/css" href="css/shThemeDefault.css" >
	<link rel="stylesheet" type="text/css" href="css/site.css" >

	<style>
		.navbar-toggle{
			float:left;
			margin-left:7px;
		}
	</style>
	
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->

    <link rel="shortcut icon" href="icon.png">
	
	<script>
	$(document).ready(function() {
	  $(".collapsible-menu").on("click", "li > a", function(e) {
		var p = $(this).parent();
		if (p.hasClass("has-children")) {
			p.toggleClass("open").siblings(".open").removeClass("open");
		}
	  });
	  
	  var url = window.location.pathname;
		var filename = url.substring(url.lastIndexOf('/')+1);
		
	  $(".collapsible-menu a").each(function(){
		var link = $(this).attr("href");
		
		if (filename == link) {
			var item = $(this).parent();
			
			while (!item.hasClass("collapsible-menu")){
				if (item.hasClass("has-children")) {
					item.toggleClass("open").siblings(".open").removeClass("open");
				}
				item = $(item).parent()
			}
		}

	  })
	  
	});
	</script>
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top" >
      <div class="container">
        <div class="navbar-header">
		  <button type="button" data-target="#navbar" data-toggle="collapse" class="navbar-toggle"> 
			  <span class="sr-only">Toggle navigation</span> 
			  <span class="icon-bar"></span> 
			  <span class="icon-bar"></span> 
		  </button>
          <a class="navbar-brand" href="index.html">Lense</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Get Started<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li class="disabled"><a href="learn.html">Learn Lense</a></li>
					<li class="disabled"><a href="try.html">Try Lense</a></li>
					<li><a href="https://github.com/sergiotaborda/lense-lang">Download</a></li>
				</ul>
			</li>
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Fundamentals<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="tour/tour.html">Language Tour</a></li>
					<li class="disabled"><a href="guide.html">Programmer's Guide</a></li>
					<li><a href="platforms.html">Target Platforms's Guide</a></li>
						<li><a href="glossary.html">Glossary</a></li>
				</ul>
            </li>
			
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Details<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="nullability.html">Nullability</a></li>
					<li><a href="numbers.html">Numbers</a></li>
					<li><a href="strings.html">Strings</a></li>
					<li><a href="arrays.html">Arrays</a></li>
					
					<li><a href="containerLiterals.html">Container Literals</a></li>
					<li><a href="objects.html">Classes and Objects</a></li>
					<li><a href="constructors.html">Constructors</a></li>
					<li><a href="properties.html">Properties</a></li>
				
					<li><a href="operators.html">Operators</a></li>	
				
					<li><a href="monads.html">Monads</a></li>
					<li><a href="concurrency.html">Concurrency</a></li>
					<li><a href="erasure.html">Type Erasure</a></li>
					
					<li><a href="enhancements.html">External Enhancements</a></li>
					
				</ul>
            </li>
			<li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">More<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://github.com/sergiotaborda/lense-lang">Source Code</a></li>
			    <li><a href="https://groups.google.com/forum/#!forum/lense-lang">Discussion Group</a></li>
				
				<li><a href="status.html">Roadmap &amp; Status</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
	
	<div class="corner-ribbon top-right sticky shadow turquoise"><a href="status.html">Experimentation Stage</a></div>
    
	<div class="container">
	<div class="container-fluid">
		<div class="row row-offcanvas row-offcanvas-right">
			 <div class="col-xs-12 col-sm-9 col-sm-push-3">
				<div class="sect1">
<h2 id="_fields_and_properties">Fields and Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In other languages you can have fields to store state and methods to manipulate state, or (like in C# and Scala) you can have properties.
Properties store state like fields but have two associated methods called Accessor and Modifier. The accessor is the method called to obtain (get) the value of the property. The Modifier is the methods called to change (set) the value of the property.</p>
</div>
<div class="paragraph">
<p>From the design point of view, fields represent state and properties represent the access to that state with the added value of intercepting the state read and write operations or eventually calculating the state on the fly from other properties. Because of this, fields are not supposed to be public because it will break encapsulation (how to store state should be a private choice). On the other hand, properties never need to be private because if they are they, the object is using encapsulation to protect it from it self.</p>
</div>
<div class="paragraph">
<p>So, Lense does only have properties. The compiler will produce backing fields, accessor and modifier methods that read and write from/to the backing field. Backing fields are not accessible by other class members.</p>
</div>
<div class="paragraph">
<p>In Lense all properties are required to be initialized except for optional properties that are initialized automatic to <code>none</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public gender : Gender = male; // initialize to a default value
	public name : String?;
	public surname : String?;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the accessor and modifier will be added by the compiler when not explicitly defined, this code is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public gender : Gender = male {get;set;};
	public name : String? = none {get;set;} ;
	public surname : String? = none {get;set;} ;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a serious reduction in boilerplate for the most common case.</p>
</div>
<div class="sect2">
<h3 id="_read_only_and_calculated_properties">Read-Only and Calculated Properties</h3>
<div class="paragraph">
<p>When a property is read-only it&#8217;s value is obtained from other properties via some function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public name : String?;

	public surname : String?;

	public fullname : String? {
		get {
			return name.zip(surname, (n , s ) -&gt; "{{n }} {{s}}");
		}
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the modifier is not explicitly defined, but the accessor is, the compiler will understand this is a read-only property.
This syntax can be verbose at times, so you a use the shorter version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public name : String?;

	public surname : String?;

	public fullname : String? =&gt; name.zip(surname, (n , s ) -&gt; "{{n }} {{s}}");
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_write_only_and_intercepting_modifications">Write-Only and Intercepting Modifications</h3>
<div class="paragraph">
<p>You can use the full syntax when you need to code the accessor and the modifier. If you code the modifier explicitly you must explicitly declare the accessor, otherwise the compiler will assume it is a write-only property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public name : String?;

	public surname : String?;

	public fullname : String? =&gt; name.zip(surname, (n , s ) -&gt; "{{n }} {{s}}");

	public birthday : Date? {
		get {}
		set(value){ // (a)
			if (value != none &amp;&amp; value &gt; Date.today){
				throw new IllegalArgumentException("A Person birthday cannot be in the future");
			}

			this.birthday = value; // (c)
		}
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code is quite interesting. We define the accessor and the modifier explicitly. The modifier receives a parameter <em>(a)</em> with the new value. You can call the parameter whatever you like and the type of the parameter is implicitly the same has that of the property. Then we make a simple validation and throw an exception if there is a problem. In this case, the <code>value</code> parameter is a optional type, so we use Lense&#8217;s type flow sensitivity to unbox the value and compare it to today&#8217;s date <em>(b)</em>. If all is well we assign the value the property <em>(c)</em>.</p>
</div>
<div class="paragraph">
<p>Note than assigning a value to the property inside the modifier simply assigns it the the backing field directly, since otherwise it would cause a infinite recursion of calls to the modifier.  This is why, in Lense, there is not special syntax to access or modify the backing field (since no other meaning terminates).</p>
</div>
</div>
<div class="sect2">
<h3 id="_properties_constructor">Properties Constructor</h3>
<div class="paragraph">
<p>If the properties are mandatory is better to required then in the constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public constructor( name : String,  surname : String,  birthday : Date){
		this.name = name;
		this.surname = surname;
		this.birthday = birthday;
	}

	public name : String;

	public surname : String;

	public fullname : String =&gt; "{{n }} {{s}}";

	public birthday : Date {
		get {}
		set(value){ // (a)
			if (value &gt; Date.Today){
				throw new IllegalArgumentException("A Person birthday cannot be in the future");
			}

			this.birthday = value; // (b)
		}
	}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we don&#8217;t need the optional types and we do not need to initialize the properties with dummy values.
If you don&#8217;t like this boilerplate code , we can always use the <a href="constructors.html#primary">primary constructor</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public constructor( public var name : String, public var surname : String, public var birthday : Date);

	public fullname : String =&gt; "{{n }} {{s}}";

	public birthday : Date {
		get {}
		set(value){ // (a)
			if (value &gt; Date.Today){
				throw new IllegalArgumentException("A Person birthday cannot be in the future");
			}

			this.birthday = value; // (b)
		}
	}


}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create the same properties as before with eventually the same code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_different_visibility">Different visibility</h3>
<div class="paragraph">
<p>Sometimes you need to have a public accessor but a private modifier, or vice-versa. In that case you can use visibility modifiers to declare different visibilities</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="lense" class="language-lense hljs">public class Person {

	public name : String? { public get; private set;}
	public surname : String? { get; private set;}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you omit the modifier near the accessor or modifier declarations the standard visibility of the property will be used.
The accessor and modifier  visibility cannot be less restrictive than that of the property. Having a <code>public get</code> for a <code>private</code> property makes no sense.</p>
</div>
</div>
<div class="sect2">
<h3 id="_interoperability">Interoperability</h3>
<div class="paragraph">
<p>Some issues regarding how properties are translated to the native platform&#8217;s concepts.</p>
</div>
<div class="sect3">
<h4 id="_explicit_accessor_and_modifier">Explicit Accessor and Modifier</h4>
<div class="paragraph">
<p>Each platform supports the concept of Property in a different way. The Lense back-end compiler will use the platform&#8217;s strategy of choice. In the JVM , for example, for property <code>xyz</code> is translated to a backing private field <code>xyz</code> accompanied by methods <code>getXyz()</code> and <code>setXyz()</code> with the correct visibility.</p>
</div>
</div>
<div class="sect3">
<h4 id="_private_property_erasure">Private Property Erasure</h4>
<div class="paragraph">
<p>When the target platform supports fields, the property is marked <code>private</code> and the accessor and modifier are not explicitly declared the compiler may erase the property and produce a private field that will be accessed directly.</p>
</div>
<div class="paragraph">
<p>In case the property is not public and the accessor and modifier are not explicitly declared, the compiler can  bypass the accessor and modifier and use the backing field directly when reading and writing within the class.</p>
</div>
</div>
</div>
</div>
</div>
			</div>
			<div class="col-xs-6 col-sm-3 col-sm-pull-9 sidebar-offcanvas" id="sidebar"">

<ul class="collapsible-menu">
	<li><a href="index.html">Introduction</a></i></i>
	<li><a href="status.html">Status</a></i>
	<li class="has-children">
		<a href="javascript:void(0)">Syntax and Semantics</a>
		<ul >
			<li><a href="identifiers.html">Reserved Words</a></li>
			<li><a href="variables.html">Variables and Mutability</a></li>
			<li><a href="nullability.html">Nullability</a></li>
			
			 <!--
			
			<li>Comments</li>
			<li>Generics</li>
			<li>Functions and Lambdas</li>
			
			-->
			
			<li class="has-children">
				<a href="javascript:void(0)">Fundamental Types</a>
				<ul>
					<li><a href="booleans.html">Boolean</a></li>
					<li><a href="strings.html">String</a></li>
					<li><a href="numbers.html">Number</a></li>
					<li><a href="binary.html">Binary</a></li>
					<li><a href="interval.html">Interval</a></li>
					<li><a href="iterable.html">Iterable</a></li>
					<li class="has-children"> 
						<a href="javascript:void(0)">Containers</a>
						<ul> 
							<li><a href="maybe.html">Maybe</a></li>
							<li><a href="tuples.html">Tuple</a></li>
							
							<li>Range</li>
							<li><a href="sequence.html">Sequence</a></li>
							<li>Association</li>
							
						</ul>
					</li>
				</ul>
			</li>
			<li><a href="containerLiterals.html">Container Literals</a></li>
			<li><a href="arrays.html">Arrays</a></li>
			<li class="has-children">
				<a href="javascript:void(0)">Control Statements</a>
				<ul>
					<li>Decision: if</li>
					<li>Loop : while</li>
					<li>Iteration : for</li>
					<li>Selection/Matching : switch</li>
				</ul>
			</li>
			<li class="has-children"> 
				<a href="javascript:void(0)">Types</a>
				<ul>	
					<li><a href="classes.html">Classes</a></li>
					<li><a href="objects.html">Objects</a></li>
					<li><a href="interfaces.html">Interfaces</a></li>
					<li>Enums</li>
					<li><a href="enhancements.html">Enhancements</a></li>
				</ul>
			</li>
			<li class="has-children"> 
				<a href="javascript:void(0)">Type Members</a>
				<ul>
					<li><a href="constructors.html">Constructors</a></li>
					<li><a href="properties.html">Fields and Properties</a></li>
					<li><a href="indexers.html">Indexed Properties</a></li>
					<li>Methods</li>
				</ul>
			</li>
			<li><a href="casting.html">Casting</a></li>
			<li><a href="operators.html">Operator Overloading</a></li>
			
		</ul>
	</li>
	<li class="has-children">
		<a href="javascript:void(0)">Compilation</a>
		<ul>
			<li><a href="platforms.html">Platforms</a></li>
			<li><a href="erasure.html">Erasure</a></li>
		</ul>
	</li>
	<li><a href="concurrency.html">Concurrency</a>
	</li>

<ul>			</div>
		</div>
	</div>
	
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">Lense is an open source project </p>
      </div>
    </div>
    
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    <script>
	
		$(document).ready(function() {
				$("code.language-lense").addClass("brush: lense");
				$("code.language-java").addClass("brush: java");
				$("code.language-c-sharp").addClass("brush: c-sharp");
				$("code.language-typescript").addClass("brush: typescript");
				$("code.language-dart").addClass("brush: dart");
				$("code.language-swift").addClass("brush: swift");
		});
	
    	SyntaxHighlighter.config.tagName = 'code';
		SyntaxHighlighter.defaults.toolbar = false;
		SyntaxHighlighter.all();
    
    </script>
  </body>
</html>