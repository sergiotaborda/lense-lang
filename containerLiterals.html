<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Container Literals</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">
    
    
  
	<script src="js/shCore.js"></script>

	<script src="js/shBrushScala.js"></script>
	<script src="js/shBrushCSharp.js"></script>
	<script src="js/shBrushDart.js"></script>
	<script src="js/shBrushJava.js"></script>
		
	<script src="js/shBrushLense.js"></script>
	<style>
	 .console {
	    background : black;
	    color: white;
	    width: 500px;
	 }
	 p {
	 	text-align:justified;
	 }
	 pre {
	 	background-color:white !important;
	 	border:0px !important;
	 	padding:0px !important;
	 	overflow: visible !important;
	 }
	 pre code {
	 	padding:2px !important;
	 	margin : 0px !important;
	 }
	</style>

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">
  	<link rel="stylesheet" type="text/css" href="css/shCore.css"  >
	<link rel="stylesheet" type="text/css" href="css/shThemeLense.css" >
	
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->

    <link rel="shortcut icon" href="icon.png">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">Lense</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li class="disabled"><a href="learn.html">Learn Lense</a></li>
					<li class="disabled"><a href="try.html">Try Lense</a></li>
					<li><a href="https://github.com/sergiotaborda/lense-lang">Download</a></li>
				</ul>
			</li>
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Fundamentals<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="tour.html">Language Tour</a></li>
					<li class="disabled"><a href="guide.html">Programmer's Guide</a></li>
					<li><a href="platforms.html">Target Platforms's Guide</a></li>
				</ul>
            </li>
			
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Details<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="numbers.html">Numbers</a></li>
					<li><a href="strings.html">Strings</a></li>
					<li><a href="objects.html">Classes and Objects</a></li>
					<li><a href="constructors.html">Constructors</a></li>
					<li><a href="operators.html">Operators</a></li>
					<li><a href="containerLiterals.html">Container Literals</a></li>
					<li><a href="sumtypes.html">Sum Types</a></li>
					<li><a href="monads.html">Monads</a></li>
					
					<li class="disabled"><a href="enhancements.html">External Enhancements</a></li>
					<li class="disabled"><a href="concurrency.html">Concurrency</a></li>
				</ul>
            </li>
			<li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">More<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://github.com/sergiotaborda/lense-lang">Source Code</a></li>
			    <li><a href="https://groups.google.com/forum/#!forum/lense-lang">Discussion Group</a></li>
				
				<li><a href="status.html">Roadmap &amp; Status</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
	<div class="corner-ribbon top-right sticky shadow"><a href="status.html">Exploration Stage</a></div>
    <div class="container">
	<p><h1>Container Literals</h1><p>Lense recognizes literals for <code>Sequence</code>s, <code>Association</code>s and <code>Tuple</code>s. As a rule, because Lense has type inference it must be possible to infer the type of literal from the syntax, so we need a diferent sintax for each container type. </p><h2>Sequences</h2><p>In C-familly languages an array is a fundamental type and can be created literally using curly brackets <em>{</em> and <em>}</em>, but in more mathematical oriented languages such as Fortran an Julia common brackets are used. </p>
<pre><code class="brush: java ">// an example in Java
int[] array = new int[]{1, 2, 3};
</code></pre><p>On a closer look we can understand the C-family languages syntax like Java or C# as not having array literals <em>per se</em>, but initializers applied to arrays. So the syntax <code>{1 ,2 , 3}</code> does not denote an array, but an initializer. Initializers do not have type and they are intrinsically understood by the compiler.</p><p>What's happening in that java code is that an array is being constructed with <code>new int[]</code> and then initialized with the values 1, 2 and 3. The JVM will translate this two operations as a single operation, but<br/>conceptually there is a difference.</p><p>In C# the same concept is used to initialize both arrays and lists </p>
<pre><code class="brush: c#">int[] array = new int[]{1, 2, 3};
List&lt;int&gt; list = new List(){1, 2, 3};
</code></pre><p>In Lense the type of the container is fixed by the syntax and a <a href="constructors.html#conversion">conversion constructor</a> is used to copy the values to another type if need be. So no constructor is called. A runtime object is created that depends on the underlying platform. The type inside the container is inferred from the declared value types.</p><p>Lense uses common brackets to represent <code>Sequence</code> literals. Keep in mind arrays are not fundamental types in Lense, sequences are.An array is a special (mutable) sub type of sequence.</p>
<pre><code class="brush: lense">var Sequence&lt;Natural&gt; sequence = [1, 2, 3];
var Array&lt;Natural&gt; array = [1, 2, 3];
</code></pre><p>The first line creates a sequence of elements 1, 2 and 3. The second line creates an array of the elements 1, 2 and 3 by first creating a sequence and them promoting it to an Array by calling its <a href="constructors.html#conversion">conversion constructor</a>. In practice the compiler is free to optimize these literal constructions and not really call the conversion constructor on <code>Array&lt;T&gt;</code>.</p><h2>Sets</h2><p>Currently there is no special syntax for sets. A set can be created by using a literal sequence and a constructor.</p>
<pre><code class="brush: lense">var Set&lt;Natural&gt; sequence = new HashSet([1, 2, 2, 3, 4, 3]);
</code></pre><p>Or, you can use the <code>toSet</code> method in <code>Iterable</code> (super type of <code>Sequence</code>):</p>
<pre><code class="brush: lense">var Set&lt;Natural&gt; sequence = [1, 2, 2, 3, 4, 3].toSet();
</code></pre><p>The set will only contain the elements 1, 2, 3 and 4 once.</p><h2>Associations</h2><p>Associations are used to maintain pairs of values related to each other. Normally in a <em>key to value</em> relationship. </p>
<pre><code class="brush: lense">var Association&lt;Natural,String&gt; association = { 1:&quot;First&quot;, 2:&quot;Second&quot;, 3:&quot;Third&quot; };
var Map&lt;Natural, String&gt; map =  { 1:&quot;First&quot;, 2:&quot;Second&quot;, 3:&quot;Third&quot; };
</code></pre><p>Like <code>Sequence</code>, <code>Association</code> is a fundamental type in Lense, so it has its own literal type. </p><p>The first line creates an association of elements. The second line creates a map of the same elements by first creating an association and them promoting it to a Map. In Lense, <code>Map</code> is a specific (mutable) implementation of <code>Association</code> and not an interface like in Java. Is equivalent to <code>HashMap</code> in Java.</p><h2>Tuples</h2><p>Tuples are similar to sequences, but each index has its own type. Tuples also are fundamental types in Lense.<br/>Structurally a Tuple is a node in a linked-list kind of structure. But Tuples are not Sequences, eventhought they are <code>Iterable&lt;Any&gt;</code><br/>The syntax is similar to Sequences.</p>
<pre><code class="brush: lense">var Tuple&lt;Natural , Tuple&lt;String, Tuple&lt; Boolean, Nothing &gt;&gt;&gt; tuple = ( 1 , &quot;2&quot; , true );
var (Natural , String , Boolean) association = ( 1 : &quot;2&quot; : true );
</code></pre><p>The first line creates a tuple of elements. The second line creates the same tuple but uses the tuple short type syntax for representing tuple types. The default form used in the first line can be very long and odd to write and read eventhought is the exact correct type of that tuple. </p><h2>Matrix (Under Consideration)</h2><p>It could be possible to define a specific syntax for a two dimensional<code>Matrix</code>. This is not currently implemented.</p>
<pre><code class="brush: lense">var Matrix&lt;Natural&gt; matrix = [ 1 ,2 ,3 ; 4, 5, 6 ; 5 6 7];

// also can be written as

var Matrix&lt;Natural&gt; matrix = [ 
	1 ,2 ,3 ;
 	4, 5, 6 ; 
 	5, 6, 7
];
</code></pre><p>This would make a lot of sense in order to facilitate using Lense in more math and/or science scenarios.<br/>An alternative is to write sequence of sequences literals an use conversion constructors :</p>
<pre><code class="brush: lense">var Matrix&lt;Natural&gt; matrix = [ [1 ,2 ,3 ], [4, 5, 6 ], [ 5 6 7]];

// also can be written as

var Matrix&lt;Natural&gt; matrix = [ 
	[1 ,2 ,3],
 	[4, 5, 6],
 	[5, 6, 7]
];
</code></pre><p>The support for matrixes is still under consideration and may not be implemented. </p><h2>Records (Under Consideration)</h2><p>Records are a special object that represents a non typed property bag. Records are not currently implemented.<br/>A possible syntax would be similar to an association, but using = instead of ":". The difference is that on an association both sides of the ":" can be variables,<br/>in a record only the right side can be a variable. The left side is interpreted as the name of a property. </p>
<pre><code class="brush: lense">var Record address = {
	Street = &quot;Baker Street&quot;,
	Number = &quot;221B&quot;,
	City = &quot;Lodon&quot;,
	Country = &quot;England&quot;
}

</code></pre><p>This syntax takes us full circle to the initializer concept discussed at the beginning. We can now use records to initialize other types like so:</p>
<pre><code class="brush: lense">var Address address = new Address {
	Street = &quot;Baker Street&quot;,
	Number = &quot;221B&quot;,
	City = &quot;London&quot;,
	Country = &quot;England&quot;
}

</code></pre><p>This a combination of a call to the <a href="constructors.html">primary constructor</a> and a initialization of each property referred in the record literal. This is not a conversion but syntax sugar for:</p>
<pre><code class="brush: lense">var Record tempRecord = {
	Street = &quot;Baker Street&quot;,
	Number = &quot;221B&quot;,
	City = &quot;London&quot;,
	Country = &quot;England&quot;
}

var Address address = new Address();

address.Street = tempRecord.Street;
address.Number = tempRecord.Number;
address.City = tempRecord.City;
address.Country = tempRecord.Country;
</code></pre><p>That is optimized to:</p>
<pre><code class="brush: lense">var Address address = new Address();

address.Street = &quot;Baker Street&quot;;
address.Number = &quot;221B&quot;;
address.City = &quot;London&quot;;
address.Country = &quot;England&quot;;
</code></pre><p>This feature is similar to the initialization syntax in C# even thought in Lense we would be using the conjunction of two concepts : constructors and record literals.</p></p>
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">Lense is an open source project and a community driven development</p>
      </div>
    </div>
    
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    <script>
    	SyntaxHighlighter.config.tagName = 'code';
		SyntaxHighlighter.defaults.toolbar = false;
		SyntaxHighlighter.all();
    
    </script>
  </body>
</html>