<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Monads</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">
    
    
  
	<script src="js/shCore.js"></script>

	<script src="js/shBrushScala.js"></script>
	<script src="js/shBrushCSharp.js"></script>
	<script src="js/shBrushDart.js"></script>
	<script src="js/shBrushJava.js"></script>
		
	<script src="js/shBrushLense.js"></script>
	<style>
	 .console {
	    background : black;
	    color: white;
	    width: 500px;
	 }
	 p {
	 	text-align:justified;
	 }
	 pre {
	 	background-color:white !important;
	 	border:0px !important;
	 	padding:0px !important;
	 	overflow: visible !important;
	 }
	 pre code {
	 	padding:2px !important;
	 	margin : 0px !important;
	 }
	</style>

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">
  	<link rel="stylesheet" type="text/css" href="css/shCore.css"  >
	<link rel="stylesheet" type="text/css" href="css/shThemeLense.css" >
	
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->

    <link rel="shortcut icon" href="icon.png">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">Lense</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li class="disabled"><a href="learn.html">Learn Lense</a></li>
					<li class="disabled"><a href="try.html">Try Lense</a></li>
					<li><a href="https://github.com/sergiotaborda/lense-lang">Download</a></li>
				</ul>
			</li>
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Fundamentals<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="tour.html">Language Tour</a></li>
					<li class="disabled"><a href="guide.html">Programmer's Guide</a></li>
					<li><a href="platforms.html">Target Platforms's Guide</a></li>
				</ul>
            </li>
			
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Details<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="numbers.html">Numbers</a></li>
					<li><a href="strings.html">Strings</a></li>
					<li><a href="objects.html">Classes and Objects</a></li>
					<li><a href="constructors.html">Constructors</a></li>
					<li><a href="operators.html">Operators</a></li>
					<li><a href="containerLiterals.html">Container Literals</a></li>
					<li><a href="sumtypes.html">Sum Types</a></li>
					<li><a href="monads.html">Monads</a></li>
					
					<li class="disabled"><a href="enhancements.html">External Enhancements</a></li>
					<li class="disabled"><a href="concurrency.html">Concurrency</a></li>
				</ul>
            </li>
			<li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">More<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://github.com/sergiotaborda/lense-lang">Source Code</a></li>
			    <li><a href="https://groups.google.com/forum/#!forum/lense-lang">Discussion Group</a></li>
				
				<li><a href="status.html">Roadmap &amp; Status</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
	<div class="corner-ribbon top-right sticky shadow"><a href="status.html">Exploration Stage</a></div>
    <div class="container">
	<p><h1>Monads</h1><p>Lense supports the concept of Monad. A monad is a special container type that allows operations to occur on the contained type without explicitly requiring<br/>the boxing and unboxing of the contained instances. Monads are a special case of the Decorator pattern where all operations return a new object and transform the decorated type in some way.</p><p>Because all monads are containers, they rely on decorating a contained object. In Lense we do this simply by calling the monads constructor.<br/>You can also create <a href="enhancements.html">enhancements</a> to facilitate some more common encapsulations.</p><p>The most common operation is to transform a monad object to another monad object of the same type operating in the contained elements. This is done by the map function.</p><h1>Iterable</h1><p>Iterable is a monad that allows the iteration of elements in a given order. <code>Sequence</code>s like <code>Array</code>s and <code>List</code>s implement <code>Iterable</code>s . Also <code>Association</code>s , <code>Tuple</code>s and <code>Progression</code> are <code>Iterable</code>s.<br/>You can iterate over the elements of any <code>Iterable&lt;T&gt;</code> with the <em>for-each</em> directive and transform them in some way</p>
<pre><code class="brush: lense ">Sequence&lt;String&gt; cities = [&quot;New York&quot;, &quot;London&quot;, &quot;Paris&quot;];
List&lt;Natural&gt; lengths = new List&lt;Natural&gt;();

for (String city in cities){
	lengths.add(city.size());
}
</code></pre><p>When you need to transform several containers or the transformations are complex this type of explicit iteration becomes cumbersome.<br/>Because all Iterables are monads , they have the <code>map</code> method that receives a lambda to operate over all elements. </p>
<pre><code class="brush: lense ">Sequence&lt;String&gt; cities = [&quot;New York&quot;, &quot;London&quot;, &quot;Paris&quot;];

List&lt;Natural&gt; lengths =  cities.map( city -&gt; city.size());
</code></pre><p>This code simply applies a transformation to all elements of the original container (*cities*) and produces a new <em>Iterable<Natural></em>. Them we assign that result to a List.<br/>Because List has a conversion constructor based on Iterable the elements are copied to the list as if we had write</p>
<pre><code class="brush: lense ">Sequence&lt;String&gt; cities = [&quot;New York&quot;, &quot;London&quot;, &quot;Paris&quot;];

List&lt;Natural&gt; lengths =  new List&lt;Natural&gt;(cities.map( city -&gt; city.size()));
</code></pre><p>You can use several other methods like <code>filter</code> that allows you to exclude some values.<br/>For example, if we want to calculate the cubes of only odd numbers between 1 and 100 we can use a Progression and write </p>
<pre><code class="brush: lense ">List&lt;Natural&gt; cubes =  1..100.filter(n -&gt; n.isOdd()).map( n -&gt; n ** 3));
</code></pre><p>This a very simple, readable, code that means the same as </p>
<pre><code class="brush: lense ">List&lt;Natural&gt; cubes = new List&lt;Natural&gt;();

for (Natural n in 1..100) {
	if (n.isOdd()) {
		lengths.add(n ** 3);
	}
}
</code></pre><h1>Maybe</h1><p>Maybe is a monad that allows us to manipulate possible absent values. <code>Maybe&lt;T&gt;</code> is an abstract type with only two subtypes : <code>Some&lt;T&gt;</code> and None. <code>None</code> has a single instance named <code>none</code>. <code>none</code> represents the absence of value.<br/>Maybe is equivalent to the <code>Optional</code> type that exists in other languages. However, in Lense, Maybe is a fundamental type and its the only way you can handle the concept of "null" since Lense does not allow the traditional <code>null</code> reference value. </p>
<pre><code class="brush: lense ">public Maybe&lt;Natural&gt; calculateNameLength(Maybe&lt;String&gt; name){
	return name.map(m -&gt; m.size());
}
</code></pre><p>Because Maybe is a fundamental type in Lense we can simplify this method with some shorter syntax:</p>
<pre><code class="brush: lense ">public Natural? calculateNameLength(String? name){
	return name.map(m -&gt; m.size());
}
</code></pre><p>This simple method returns the length of the given name and we can called it like:</p>
<pre><code class="brush: lense ">Natural?  x = calculateNameLength(&quot;London&quot;); // x holds a Some&lt;Natural&gt; with a value 6 inside
Natural?  y = calculateNameLength(none); // y holds the instance of &#39;none&#39;. 
</code></pre><p>Note that the methods does not use any decision directive to handle the absence of value directly. This is handled by the <code>map</code> method it self.<br/>If the original Maybe is really and instanceof of <code>Some</code> it has some value in it, that value is passed to the given lambda and a new <code>Some</code> is created having inside the calculated value.<br/>If the original Maybe is really a <code>none</code> the lambda is not invoked and <code>none</code> is returned.</p><p>You can, if you want to, transform a Maybe<T> to a T by offering a default value, like this:</p>
<pre><code class="brush: lense ">Natural?  x =  ... // obtain in some way

Natural size = x.or(0);
</code></pre><p>this means if <em>x</em> has a value, that value will assigned to <em>size</em>, otherwise 0 will be assigned.</p></p>
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">Lense is an open source project and a community driven development</p>
      </div>
    </div>
    
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    <script>
    	SyntaxHighlighter.config.tagName = 'code';
		SyntaxHighlighter.defaults.toolbar = false;
		SyntaxHighlighter.all();
    
    </script>
  </body>
</html>