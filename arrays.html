<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Arrays</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">
    
    <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-77665803-1', 'auto');
	  ga('send', 'pageview');

	</script>
  
	<script src="js/shCore.js"></script>

	<script src="js/shBrushScala.js"></script>
	<script src="js/shBrushCSharp.js"></script>
	<script src="js/shBrushDart.js"></script>
	<script src="js/shBrushJava.js"></script>
		
	<script src="js/shBrushLense.js"></script>


    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">
  	<link rel="stylesheet" type="text/css" href="css/shCore.css"  >
	<link rel="stylesheet" type="text/css" href="css/shThemeLense.css" >
	<link rel="stylesheet" type="text/css" href="css/shThemeDefault.css" >
	
	<style>
	 .console {
	    background : black;
	    color: white;
	    width: 500px;
	 }
	 p {
	 	text-align:justified;
	 }
	 pre {
	 	background-color:white !important;
	 	border:0px !important;
	 	padding:0px !important;
	 	overflow: visible !important;
	 }
	 pre code {
	 	padding:2px !important;
	 	margin : 0px !important;
	 }
	 
	.syntaxhighlighter table .container:before {
		display: none !important;
	}
	</style>
	
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->

    <link rel="shortcut icon" href="icon.png">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">Lense</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li class="disabled"><a href="learn.html">Learn Lense</a></li>
					<li class="disabled"><a href="try.html">Try Lense</a></li>
					<li><a href="https://github.com/sergiotaborda/lense-lang">Download</a></li>
				</ul>
			</li>
            <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">Fundamentals<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="tour/tour.html">Language Tour</a></li>
					<li class="disabled"><a href="guide.html">Programmer's Guide</a></li>
					<li><a href="platforms.html">Target Platforms's Guide</a></li>
						<li><a href="glossary.html">Glossary</a></li>
				</ul>
            </li>
			
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Details<b class="caret"></b></a>
				<ul class="dropdown-menu">
					<li><a href="nullability.html">Nullability</a></li>
					<li><a href="numbers.html">Numbers</a></li>
					<li><a href="strings.html">Strings</a></li>
					<li><a href="arrays.html">Arrays</a></li>
					
					<li><a href="containerLiterals.html">Container Literals</a></li>
					<li><a href="objects.html">Classes and Objects</a></li>
					<li><a href="constructors.html">Constructors</a></li>
					<li><a href="properties.html">Properties</a></li>
				
					<li><a href="operators.html">Operators</a></li>	
				
					<li><a href="monads.html">Monads</a></li>
					<li><a href="concurrency.html">Concurrency</a></li>
					<li><a href="erasure.html">Type Erasure</a></li>
					
					<li><a href="enhancements.html">External Enhancements</a></li>
					
				</ul>
            </li>
			<li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">More<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="https://github.com/sergiotaborda/lense-lang">Source Code</a></li>
			    <li><a href="https://groups.google.com/forum/#!forum/lense-lang">Discussion Group</a></li>
				
				<li><a href="status.html">Roadmap &amp; Status</a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
	<div class="corner-ribbon top-right sticky shadow"><a href="status.html">Exploration Stage</a></div>
    <div class="container">
	<p><h1>Arrays</h1><p>In other languages arrays are normally <a href="glossary.html#primtiveTypes">primitive types</a> or at least <a href="glossary.html#fundamentalTypes">fundamental types</a>. In Lense arrays are simply objects of the <code>Array</code> class. This class belongs to the Collections API and receive no special handling by the language or the compiler. The Collections API is a set of common object structures like hash table and linked list implemented in coherent framework.</p><p>This means you create arrays as you would any other class (i.e invoking the constructor). There is no <code>new someArray[2]</code> sintax for array definition. Arrays in Lense are the default implementation of the <code>EditableSequence</code> interface that behave like arrays in other languages. They have fixed length and values can be edited, but must be pre-initialized. </p><h1>Inicialization</h1><p>Because Lense does not have the concept of <code>null</code> all arrays must be inicialized correctly to a specified value. There are no default values. If you cannot determine the initialization values you will be better using a <code>List</code>( or any other <code>ResizableSequence</code> like <code>LinkedList</code>) that allows you to start with zero elements in que collection and add the elements as you go. When you use <code>Array</code> you need to supply the elements at creation time. The easiest way to do this is with a literal:</p>
<pre><code class="brush: lense">    val numbers : Array&lt;Natural&gt; = [1, 2, 3 , 4 , 5];
</code></pre><p>Remember <code>Array</code> is not a fundamental type in Lense. That literal above really creates a <code>Sequence</code> object that is read-only by definition. The compiler then uses a <a href="constructors.html#conversion">conversion constructor</a> to create the <code>Array</code> from the <code>Sequence</code>. If you wish to initilize all position in the array to the same value you can use a special <a href="constructors.html#named">named constructor</a>:</p>
<pre><code class="brush: lense">    // this code creates an array with 5 elements all equal to zero.
    val numbers : Array&lt;Natural&gt;  = new Array.filled&lt;Natural&gt;(5, 0);
</code></pre><p>Here we will be writing the examples with no generic type inference, but normally you would write with less ceremony:</p>
<pre><code class="brush: lense">    var numbers = new Array.filled(5, 0);
</code></pre><p>Its all the same.</p><p>If a constant is not a good option in your case, you can, alternativly, use the overloaded version that receives a initialization function.</p>
<pre><code class="brush: lense">    // this code creates an array with 5 elements corresponding to the first 5 even numbers.
    val numbers = new Array.filled&lt;Natural&gt;(5, i -&gt; 2 * i);
</code></pre><p>This constructor receives a lambda expression to inicialize each elements. The <code>i</code> parameter (can be any variable name) is the position in the array from 0 to the size array exclusivly. In the example we inicialize the arrays with the first 5 even numbers.</p><h1>Optional values</h1><p>Alternativly you can create an array with an optional type. This means each position of the array can have an absent value. You can create an array of optional type the same way you create it for any other type:</p>
<pre><code class="brush: lense">    // this code creates an array with 5 elements all equal to none.
    val numbers : Array&lt;Natural?&gt; = new Array.filled&lt;Natural?&gt;(5, none);
</code></pre><p>Remember <code>none</code> is the single value of type <code>None</code> that is equivalent to <code>Maybe&lt;Nothing&gt;</code>. You can also use the shorter constructor:</p>
<pre><code class="brush: lense">    // this code creates an array with 5 elements all equal to none.
    val numbers : Array&lt;Natural?&gt; = new Array.ofAbsent&lt;Natural?&gt;(5);
</code></pre><h1>Empty Arrays</h1><p>In practice is useful to be able to create an empty array. The empty constructor solves this problem creating an array with no elements at all. </p>
<pre><code class="brush: lense">    // creates an array of non-optional elements with no elements in it
    val numbers :  Array&lt;Natural&gt; = new Array.empty&lt;Natural&gt;(); 

    // creates an array of optional elements with no elements in it
    val numbers : Array&lt;Natural?&gt; = new Array.empty&lt;Natural?&gt;(); 
</code></pre><p>In this case there is no diference if you use optional types because the arrays have no elements (its size is zero).</p><h1>Indexing</h1><p>Arrays are specially useful because the values of at each position can be access by a second variable : the index. Normally this index is an integer.<br/>In java , for example, you would write:</p>
<pre><code class="brush: java">    int[] array = new int[]{1,2,3};
	
	int x = array[1]; // x is 2
	
	array[2] = 6; // array position 2 is now 6 instead of 3.
</code></pre><p>In java, and other languages, the array is a fundamental type and so the language and the compiler have special treatment for the index operator <code>[]</code>. In Lense arrays are not fundamental, but the index operator is.<br/>In reallity is not an operator is the way you use <a href="properties.html#indexed">indexed properties</a>. Indexer properties are a type of member of types that allow to read and write values based on indexes.<br/>In Lense all <code>Sequence</code>s have an indexed property for reading values at a given position in the sequence, and for <code>Array</code>s is also possible to write to that property. </p><p>This means you can still use the <code>array[i]</code> sintax to read from and write to array positions.</p>
<pre><code class="brush: lense">public updateArray( numbers : Array&lt;Natural&gt; ) {
    numbers[0] = 1;
    numbers[1] = 2;
    numbers[2] = 3;
    numbers[3] = 2 * numbers[1];
    numbers[4] = numbers[1] + numbers[2];
}
</code></pre><p>Addicionally indexes for all <code>Sequences</code> are <code>Natural</code>s. Natural ranges from zero onwards in the positive direction, so no "negative index" validation is necessary.</p><h1>Interoperability</h1><p><code>Array</code>s and other <code>Sequence</code> types have some <a href="nullability.html">issues in interop</a> mode because they can be null and contains nulls. </p><p>On the other hand, when creating instances of arrays, Lense will leverage native arrays to minimize space consumptidon and optimize speed. This is done by leveraging Lense's <a href="constructors.html#factory">factory like constructors</a> and reified generics to provide the more specific/eficient implementation possible. Obviously this is only possible in some platforms.</p></p>
	
		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">Lense is an open source project and a community driven effort</p>
      </div>
    </div>
    
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    <script>
    	SyntaxHighlighter.config.tagName = 'code';
		SyntaxHighlighter.defaults.toolbar = false;
		SyntaxHighlighter.all();
    
    </script>
  </body>
</html>